# .github/workflows/gatekeeper.yml
# Pipeline muy simple que usa la existencia de un archivo como Quality Gate.

name: ðŸ”‘ Gatekeeper Sencillo de CI/CD

# Se ejecuta en cada push a la rama principal
on:
  push:
    branches: [ main ]

jobs:
  check_and_deploy:
    runs-on: ubuntu-latest
    
    steps:
    
    # 1. Bajar el cÃ³digo
    - name: ðŸ“¥ Clonar Repositorio
      uses: actions/checkout@v4
      
    # 2. QUALITY GATE (Verifica si el archivo de pase de calidad existe)
    
      # El comando 'ls QUALITY_CHECK_PASS.txt' falla si el archivo no existe.
      # Si falla, el pipeline se detiene.
      #run: |
      #  echo "=========================================================="
      #  echo "Buscando archivo de pase de calidad (QUALITY_CHECK_PASS.txt)..."
      #  ls QUALITY_CHECK_PASS.txt # Esto falla y detiene el job si el archivo no existe.
      #  echo "âœ… Archivo encontrado. Quality Gate APROBADO."
      #  echo "=========================================================="
        
    # 3. Despliegue (solo se ejecuta si el paso 2 fue exitoso)
    - name: ðŸš€ SimulaciÃ³n de Despliegue (CD)
      if: success()
      run: |
        echo "=========================================================="
        echo "âœ… Quality Gate PASADO. Iniciando Despliegue Continuo."
        echo "ðŸŽ‰ Despliegue completado con Ã©xito."
        echo "===========================
